---
title: "ModularityHW_Kelly"
author: "Michelle Kelly"
date: "February 21, 2018"
output: pdf_document
---

# Opening

climate change, long term trends, etc

# Challenge

research questions: 
(1) can we see climate warming for ourselves by analyzing this data?
(2) in what parts of the country are temperatures getting warmer? are there parts of the country where temperatures became colder?
(3) can we say, based on this data, what change has occured in precipitation over the period?

# Action

<!--R setup chunk (Modularity lesson #8)-->
```{r, echo=FALSE, message=FALSE}
# Dependencies: none

# Required packages:
library(ggplot2)

# New variables created: none, packages loaded
```

<!--Data import chunk-->
```{r, echo=FALSE, cache=TRUE}
# Dependencies: 
#     R setup chunk
#     USAAnnualPcpn1950_2008.rds
#     USAAnnualTemp1950_2008.rds

# Required packages: none

# New variables created: 
#     precip <- loaded annual precipitation data from USA annual precip file
#     temp <- loaded annual temperature data from USA annual temp file
#     provided <- logic variable that is true if loading data from file, false if loading data from API

provided <- TRUE # change this based on if loading from API or file (modularity lesson #1)

if (provided == TRUE){
  precip <- readRDS(file = "USAAnnualPcpn1950_2008.rds")
  temp <- readRDS(file = "USAAnnualTemp1950_2008.rds")
}
```

<!--Data cleanup chunk-->
```{r, echo=FALSE, cache=TRUE}
# Dependencies:
#     R setup chunk
#     Data import chunk

# Required packages: none

# New variables created:
#     precipTrimmed <- a cleaned data frame that only contains the selected data, based on minimumTimespan
#     minimumTimespan <- numeric, to exclude stations without at least this many years of data



# step 1: throw away less than x years data
minimumTimespan <- 40 # use only weather stations with at least x years of data

length(unique(precip$name)) # number of stations

#try vectorized functions instead

aggregate(year~name, precip, FUN = function(x){max(x) - min(x)}) # FIX: correct for first station, but not iterating over all stations
str(precip)

vapply(precip, FUN)

# function to pick out minimum year for each station
# function to pick out minimum year for just alabaster shelby county

#table(factor(precip$name))

#precip$name[min(precip$year)]

precip$name[precip$year==min(precip$year)]
precip$name

precip[data$precip %in% precip$name]
#[precip$year]

#precip$name

apply(precip, MARGIN = c(year, name), FUN = )

# step 2: 
```

```{r}
# Data visualization chunk
```

# Resolution

---
# notes... be sure to add references
---
