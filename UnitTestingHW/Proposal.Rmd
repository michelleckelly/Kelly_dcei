---
title: "Proposal"
author: "Michelle Kelly"
date: "July 16, 2018"
output: pdf_document
---

```{r setup}
# streamPULSE pipeline tools
#library(devtools)
#install_github('streampulse/StreamPULSE', dependencies=TRUE)

# Latest version of streamMetabolizer
#install.packages("streamMetabolizer", dependencies = TRUE, 
#                 repos = c("https://owi.usgs.gov/R", "https://cran.rstudio.com"))

library(lubridate)
library(dataRetrieval)
library(StreamPULSE)
library(streamMetabolizer)
library(imputeTS)
library(ggplot2)
```

# Introduction  
# Methods  
# Results  

should have some preliminary results

# Discussion  

a discussion of the preliminary results, and plans for the final project

list of function scripts
dataPull.R (format just for USGS sites, return just data needed for metabolism, test that the data has correct classes)

```{r data.import, cache = TRUE}
# for this proposal, pull one USGS site
# full project will do comparison between sites of different conditions: tropical rivers, artic rivers, heavy agricultural rivers, arid rivers

source("dataLoad.R")

# Kansas River at Desoto, KS
sitecode <- "06892350" 
nickname <- "KansasR_DesotoKS"

# Menominee R near McAllister, WI
sitecode_WI <- "04067500"
nickname_WI <- "WI_Menominee"

# San Joaquin R near Jersey Point, CA
sitecode_CA <- "11337190"
nickname_CA <- "CA_JerseyPoint"


# loading CA sacramento data
filepath_CA <- "./data_files/CA_SacramentoCA.csv"
lat_CA <- "38.257778"
long_CA <- "-121.517222"


# pull data for one year period
startdate <- ymd_hms("2017-01-01 00:00:00")
enddate <- ymd_hms("2017-12-31 00:00:00")

WI_Menominee <- dataLoad(sitecode_CA, nickname_CA, startdate, enddate)

# check that data is correct classes with tests.Rmd
```

```{r modeling, cache = TRUE}
source("metabolismModeling.R")
metab_kansasR <- metabolismModeling(kansasR)

metab_WI <- metabolismModeling(WI_Menominee)
```

```{r plotting}
# have a very short function that plots
source("metabolismPlot.R")
metabolismPlot(metab_kansasR)

metabolismPlot(metab_WI)
```