---
title: "Proposal"
author: "Michelle Kelly"
date: "July 16, 2018"
output: pdf_document
---

```{r setup}
# streamPULSE pipeline tools
#library(devtools)
#install_github('streampulse/StreamPULSE', dependencies=TRUE)

# Latest version of streamMetabolizer
#install.packages("streamMetabolizer", dependencies = TRUE, 
#                 repos = c("https://owi.usgs.gov/R", "https://cran.rstudio.com"))

library(lubridate)
library(dataRetrieval)
library(StreamPULSE)
library(streamMetabolizer)
library(imputeTS)
library(ggplot2)
```

# Introduction  
# Methods  
# Results  

should have some preliminary results

# Discussion  

a discussion of the preliminary results, and plans for the final project

list of function scripts
dataPull.R (format just for USGS sites, return just data needed for metabolism, test that the data has correct classes)

```{r data.import, cache = TRUE}
# for this proposal, pull one USGS site
# full project will do comparison between sites of different conditions: tropical rivers, artic rivers, heavy agricultural rivers, arid rivers

source("dataLoad.R")

# Kansas River at Desoto, KS
sitecode <- "06892350" 
nickname <- "KansasR_DesotoKS"

# loading CA sacramento data
filepath_CA <- "./data_files/CA_SacramentoR.csv"
lat_CA <- "38.257778"
long_CA <- "-121.517222"
tz_CA <- "America/Los_Angeles"
CA_SacramentoR <- dataLoad(filepath = filepath_CA, lat = lat_CA, long = long_CA, tz = tz_CA)

# small and probabaly forested: loading CT data (smaller, forested)
filepath_CT <- "./data_files/CT_NorthBranchParkR.csv"
lat_CT <- "41.784439"
long_CT <- "-72.708056"
tz_CT <- "America/New_York"
CA_NorthBranch <- dataLoad(filepath = filepath_CT, lat = lat_CT, long = long_CT, tz = tz_CT)

# tropical.... florida?
# cold or streammelt controlled

# agriculturally dominated: Mississippi R at Clinton IA
# gage # 05420500



# check that data is correct classes with tests.Rmd
```

```{r modeling, cache = TRUE}
source("metabolismModeling.R")
metab_kansasR <- metabolismModeling(kansasR)

metab_WI <- metabolismModeling(WI_Menominee)
```

```{r plotting}
# have a very short function that plots
source("metabolismPlot.R")
metabolismPlot(metab_kansasR)

metabolismPlot(metab_WI)
```